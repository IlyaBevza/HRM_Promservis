{
"ТекстЗапроса": "ВЫБРАТЬ\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Подразделение КАК Подразделение,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ФизическоеЛицо КАК ФизическоеЛицо,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ДокументОснование КАК ДокументОснование,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.МесяцНалоговогоПериода КАК ДатаПолученияДохода,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.СуммаВыплаченногоДохода КАК СуммаДохода,\n\u0009КОЛИЧЕСТВО(РАЗЛИЧНЫЕ РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Сумма) КАК СуммаНалога\nПОМЕСТИТЬ Фильтр\nИЗ\n\u0009РегистрНакопления.РасчетыНалогоплательщиковСБюджетомПоНДФЛ КАК РасчетыНалогоплательщиковСБюджетомПоНДФЛ\nГДЕ\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Период МЕЖДУ ДАТАВРЕМЯ(2017, 1, 1) И ДАТАВРЕМЯ(2017, 12, 31, 23, 59, 59)\n\u0009И РасчетыНалогоплательщиковСБюджетомПоНДФЛ.СуммаВыплаченногоДохода <> 0\n\u0009И НЕ РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ДокументОснование = НЕОПРЕДЕЛЕНО\n\u0009И РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.расход)\n\nСГРУППИРОВАТЬ ПО\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ДокументОснование,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ФизическоеЛицо,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.МесяцНалоговогоПериода,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.СуммаВыплаченногоДохода,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Подразделение\n\nИМЕЮЩИЕ\n\u0009КОЛИЧЕСТВО(РАЗЛИЧНЫЕ РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Сумма) > 1\n;\n\n////////////////////////////////////////////////////////////////////////////////\nВЫБРАТЬ  \n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ФизическоеЛицо КАК ФизическоеЛицо,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Подразделение КАК Подразделение,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Регистратор КАК Регистратор,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ДокументОснование КАК ДокументОснование,\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.СуммаВыплаченногоДохода КАК СуммаВыплаченногоДохода,\n  РасчетыНалогоплательщиковСБюджетомПоНДФЛ.МесяцНалоговогоПериода КАК МесяцНалоговогоПериода\nИЗ\n\u0009Фильтр КАК Фильтр\n\u0009\u0009ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.РасчетыНалогоплательщиковСБюджетомПоНДФЛ КАК РасчетыНалогоплательщиковСБюджетомПоНДФЛ\n\u0009\u0009ПО Фильтр.Подразделение = РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Подразделение\n\u0009\u0009\u0009И Фильтр.ФизическоеЛицо = РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ФизическоеЛицо\n\u0009\u0009\u0009И Фильтр.ДокументОснование = РасчетыНалогоплательщиковСБюджетомПоНДФЛ.ДокументОснование\n\u0009\u0009\u0009И Фильтр.ДатаПолученияДохода = РасчетыНалогоплательщиковСБюджетомПоНДФЛ.МесяцНалоговогоПериода\n\u0009\u0009\u0009И Фильтр.СуммаДохода = РасчетыНалогоплательщиковСБюджетомПоНДФЛ.СуммаВыплаченногоДохода\nГДЕ\n\u0009РасчетыНалогоплательщиковСБюджетомПоНДФЛ.Сумма = 0",
"Обработчик": "Запрос=Новый Запрос;\n  Запрос.Текст=тТекстЗапроса;\n  //Запрос.УстановитьПараметр(\",\");\n  Выборка=Запрос.Выполнить().Выбрать();\n  Пока Выборка.Следующий() Цикл\n     наборЗаписей=РегистрыНакопления.РасчетыналогоплательщиковСБюджетомПоНДФЛ.СоздатьНаборЗаписей();\nнаборЗаписей.отбор.регистратор.Установить(выборка.регистратор);\nнаборЗаписей.Прочитать();\nДля Каждого Запись из наборЗаписей Цикл\nЕсли Запись.ФизическоеЛицо=выборка.ФизическоеЛицо И\nЗапись.Подразделение=Выборка.Подразделение И\nзапись.ДокументОснование=Выборка.ДокументОснование И\nЗапись.МесяцНалоговогоПериода=Выборка.МесяцНалоговогоПериода И\nзапись.СуммаВыплаченногоДохода=Выборка.СуммаВыплаченногоДохода Тогда\nнаборЗаписей.Удалить(Запись);\nКонецЕсли;\nКонецЦикла;\nнаборЗаписей.Записать();\n  КонецЦикла;\nнаборЗаписей.Записать();\n  КонецЦикла;"
}