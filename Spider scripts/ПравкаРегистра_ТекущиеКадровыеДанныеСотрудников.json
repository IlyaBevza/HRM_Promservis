{
"ТекстЗапроса": "ВЫБРАТЬ\n\u0009ТекущиеКадровыеДанныеСотрудников.ФизическоеЛицо КАК ФизическоеЛицо,\n\u0009ТекущиеКадровыеДанныеСотрудников.Сотрудник КАК Сотрудник,\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущееПодразделение КАК ТекущееПодразделение,\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущаяДолжность КАК ТекущаяДолжность,\n\u0009ТекущиеКадровыеДанныеСотрудников.ДатаУвольнения КАК ДатаУвольнения,\n\u0009ТекущиеКадровыеДанныеСотрудников.ДатаПриема КАК ДатаПриема,\n\u0009МАКСИМУМ(ВидыЗанятостиСотрудников.Период) КАК Период,\n\u0009ТекущиеКадровыеДанныеСотрудников.ГоловнаяОрганизация КАК ГоловнаяОрганизация,\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущаяОрганизация КАК ТекущаяОрганизация,\n\u0009МАКСИМУМ(КадроваяИсторияСотрудников.Период) КАК ПериодКадры\nПОМЕСТИТЬ ПоследнийВидЗанятости\nИЗ\n\u0009РегистрСведений.ТекущиеКадровыеДанныеСотрудников КАК ТекущиеКадровыеДанныеСотрудников\n\u0009\u0009ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ВидыЗанятостиСотрудников КАК ВидыЗанятостиСотрудников\n\u0009\u0009ПО ТекущиеКадровыеДанныеСотрудников.Сотрудник = ВидыЗанятостиСотрудников.Сотрудник\n\u0009\u0009ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КадроваяИсторияСотрудников КАК КадроваяИсторияСотрудников\n\u0009\u0009ПО ТекущиеКадровыеДанныеСотрудников.Сотрудник = КадроваяИсторияСотрудников.Сотрудник\nГДЕ\n\u0009(ТекущиеКадровыеДанныеСотрудников.ТекущийВидЗанятости = ЗНАЧЕНИЕ(перечисление.ВидыЗанятости.Пустаяссылка)\n\u0009\u0009\u0009ИЛИ ТекущиеКадровыеДанныеСотрудников.ТекущаяДолжность = ЗНАЧЕНИЕ(Справочник.Должности.Пустаяссылка)\n\u0009\u0009\u0009ИЛИ ТекущиеКадровыеДанныеСотрудников.ТекущееПодразделение = ЗНАЧЕНИЕ(Справочник.ПодразделенияОрганизаций.ПустаяСсылка))\n\u0009И НЕ ТекущиеКадровыеДанныеСотрудников.ДатаПриема = ДАТАВРЕМЯ(1, 1, 1)\n\u0009И ВидыЗанятостиСотрудников.Период <= &Период\n\u0009И КадроваяИсторияСотрудников.Период <= &Период\n\nСГРУППИРОВАТЬ ПО\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущаяДолжность,\n\u0009ТекущиеКадровыеДанныеСотрудников.ДатаПриема,\n\u0009ТекущиеКадровыеДанныеСотрудников.ФизическоеЛицо,\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущееПодразделение,\n\u0009ТекущиеКадровыеДанныеСотрудников.ДатаУвольнения,\n\u0009ТекущиеКадровыеДанныеСотрудников.Сотрудник,\n\u0009ТекущиеКадровыеДанныеСотрудников.ГоловнаяОрганизация,\n\u0009ТекущиеКадровыеДанныеСотрудников.ТекущаяОрганизация\n;\n\n////////////////////////////////////////////////////////////////////////////////\nВЫБРАТЬ\n\u0009ПоследнийВидЗанятости.ФизическоеЛицо КАК ФизическоеЛицо,\n\u0009ПоследнийВидЗанятости.Сотрудник КАК Сотрудник,\n\u0009ПоследнийВидЗанятости.ГоловнаяОрганизация КАК ГоловнаяОрганизация,\n\u0009ПоследнийВидЗанятости.ТекущаяОрганизация КАК ТекущаяОрганизация,\n\u0009ВидыЗанятостиСотрудников.ВидЗанятости КАК ТекущийВидЗанятости,\n\u0009КадроваяИсторияСотрудников.Подразделение КАК ТекущееПодразделение,\n\u0009КадроваяИсторияСотрудников.Должность КАК ТекущаяДолжность\nИЗ\n\u0009ПоследнийВидЗанятости КАК ПоследнийВидЗанятости\n\u0009\u0009ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ВидыЗанятостиСотрудников КАК ВидыЗанятостиСотрудников\n\u0009\u0009ПО ПоследнийВидЗанятости.Сотрудник = ВидыЗанятостиСотрудников.Сотрудник\n\u0009\u0009\u0009И ПоследнийВидЗанятости.Период = ВидыЗанятостиСотрудников.Период\n\u0009\u0009ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КадроваяИсторияСотрудников КАК КадроваяИсторияСотрудников\n\u0009\u0009ПО ПоследнийВидЗанятости.Сотрудник = КадроваяИсторияСотрудников.Сотрудник\n\u0009\u0009\u0009И ПоследнийВидЗанятости.ПериодКадры = КадроваяИсторияСотрудников.Период",
"Обработчик": "//Наименования переменных:\n  //Объект.СправочникПервый\n  //Объект.СправочникВторой\n  //Объект.Документ\n  //Объект.ДатаНачала\n  //Объект.ДатаОкончания\n  //ДополнительныеСвойства.Вставить(\"ОтключитьПроверкуДатыЗапретаИзменения\",Истина);\n  //--------\n\n  Запрос=Новый Запрос;\n  Запрос.Текст=тТекстЗапроса;\n  Запрос.УстановитьПараметр(\"Период\",Объект.ДатаОкончания);\n  Выборка=Запрос.Выполнить().Выбрать();\n  \n  Пока Выборка.Следующий() Цикл\n  \u0009НаборЗаписей=РегистрыСведений.ТекущиеКадровыеДанныеСотрудников.СоздатьНаборЗаписей();\n  \u0009НаборЗаписей.Отбор.ФизическоеЛицо.Установить(Выборка.ФизическоеЛицо);\n  \u0009НаборЗаписей.Отбор.Сотрудник.Установить(Выборка.Сотрудник);\n  \u0009НаборЗаписей.Отбор.ГоловнаяОрганизация.Установить(Выборка.ГоловнаяОрганизация);\n  \u0009НаборЗаписей.Отбор.ТекущаяОрганизация.Установить(Выборка.ТекущаяОрганизация);\n    НаборЗаписей.Прочитать();\n    Для Каждого Запись ИЗ НаборЗаписей Цикл\n        ЗаполнитьЗначенияСвойств(Запись,Выборка);\n    КонецЦикла;\n    НаборЗаписей.Записать();\n  КонецЦикла;",
"СтрокаПроверяемыхРеквизитов": "ДатаОкончания",
"Параметры": [
{
"Параметр": "ДатаОкончания",
"Тип": "dateTime",
"Значение": "2018-05-03T00:00:00"
}
]
}